#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>
#include "config.h"

int selectedItem = 0;

extern Adafruit_SSD1306 display;

const unsigned char box[] PROGMEM ={
  0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff,
  0xf0,0x0,0x0,0x1f,
  0xf8,0x0,0x0,0x3b,
  0xdc,0x0,0x0,0x73,
  0xce,0x0,0x0,0xe3,
  0xc7,0x0,0x1,0xc3,
  0xc3,0x80,0x3,0x83,
  0xc1,0xc0,0x7,0x3,
  0xc0,0xe0,0xe,0x3,
  0xc0,0x70,0x1c,0x3,
  0xc0,0x38,0x38,0x3,
  0xc0,0x1c,0x70,0x3,
  0xc0,0xe,0xe0,0x3,
  0xc0,0x7,0xc0,0x3,
  0xc0,0x3,0x80,0x3,
  0xc0,0x7,0xc0,0x3,
  0xc0,0xe,0xe0,0x3,
  0xc0,0x1c,0x70,0x3,
  0xc0,0x38,0x38,0x3,
  0xc0,0x70,0x1c,0x3,
  0xc0,0xe0,0xe,0x3,
  0xc1,0xc0,0x7,0x3,
  0xc3,0x80,0x3,0x83,
  0xc7,0x0,0x1,0xc3,
  0xce,0x0,0x0,0xe3,
  0xdc,0x0,0x0,0x73,
  0xf8,0x0,0x0,0x3b,
  0xf0,0x0,0x0,0x1f,
  0xe0,0x0,0x0,0xf,
  0xff,0xff,0xff,0xff,
  0xff,0xff,0xff,0xff
};

const unsigned char spade[] PROGMEM ={
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x07, 0xe0, 0x00, 
  0x00, 0x0f, 0xf0, 0x00, 0x00, 0x1f, 0xf8, 0x00, 0x00, 0x3f, 0xfc, 0x00, 0x00, 0x7f, 0xfe, 0x00, 
  0x00, 0xff, 0xff, 0x00, 0x01, 0xff, 0xff, 0x80, 0x01, 0xff, 0xff, 0x80, 0x00, 0xff, 0xff, 0x00, 
  0x00, 0x7d, 0xbe, 0x00, 0x00, 0x39, 0x9c, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x01, 0x80, 0x00, 
  0x00, 0x03, 0xc0, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x0f, 0xf0, 0x00, 0x00, 0x1f, 0xf8, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const unsigned char calc[] PROGMEM ={
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x0f, 0xff, 0xff, 0xf0, 0x08, 0x00, 0x00, 0x10, 0x0b, 0xfe, 0x7f, 0xd0, 0x0a, 0x02, 0x40, 0x50, 
  0x0a, 0x22, 0x40, 0x50, 0x0a, 0x22, 0x40, 0x50, 0x0a, 0xfa, 0x5f, 0x50, 0x0a, 0x22, 0x40, 0x50, 
  0x0a, 0x22, 0x40, 0x50, 0x0a, 0x02, 0x40, 0x50, 0x0b, 0xfe, 0x7f, 0xd0, 0x08, 0x00, 0x00, 0x10, 
  0x08, 0x00, 0x00, 0x10, 0x0b, 0xfe, 0x7f, 0xd0, 0x0a, 0x02, 0x40, 0x50, 0x0a, 0x8a, 0x40, 0x50, 
  0x0a, 0x52, 0x5f, 0x50, 0x0a, 0x22, 0x40, 0x50, 0x0a, 0x52, 0x5f, 0x50, 0x0a, 0x8a, 0x40, 0x50, 
  0x0a, 0x02, 0x40, 0x50, 0x0b, 0xfe, 0x7f, 0xd0, 0x08, 0x00, 0x00, 0x10, 0x0f, 0xff, 0xff, 0xf0, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const unsigned char cog[] PROGMEM ={
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x01, 0x80, 0x00, 0x00, 0x61, 0x86, 0x00, 0x00, 0x71, 0x8e, 0x00, 0x00, 0x39, 0x9c, 0x00, 
  0x00, 0x1f, 0xf8, 0x00, 0x00, 0x0c, 0x30, 0x00, 0x00, 0x08, 0x10, 0x00, 0x00, 0xf8, 0x1f, 0x00, 
  0x00, 0xf8, 0x1f, 0x00, 0x00, 0x08, 0x10, 0x00, 0x00, 0x0c, 0x30, 0x00, 0x00, 0x1f, 0xf8, 0x00, 
  0x00, 0x39, 0x9c, 0x00, 0x00, 0x71, 0x8e, 0x00, 0x00, 0x61, 0x86, 0x00, 0x00, 0x01, 0x80, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const unsigned char zzz[] PROGMEM ={
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x80, 
  0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x0f, 0x80, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x00, 0x80, 0x00, 
  0x00, 0x01, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x03, 0xe0, 0x00, 0x00, 0x00, 0x40, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 
  0x01, 0x00, 0x00, 0x00, 0x03, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const unsigned char xp[] PROGMEM={
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x03, 0x1f, 0x00, 
  0x03, 0x06, 0x21, 0x00, 0x01, 0x8c, 0x21, 0x00, 0x00, 0xd8, 0x21, 0x00, 0x00, 0x70, 0x3e, 0x00, 
  0x00, 0x70, 0x20, 0x00, 0x00, 0xd8, 0x20, 0x00, 0x01, 0x8c, 0x20, 0x00, 0x03, 0x06, 0x20, 0x00, 
  0x06, 0x03, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const unsigned char* icons[] PROGMEM ={
  box,
  spade,
  calc,
  xp,
  zzz,
  cog
};
void menuLPress(){
  selectedItem = (selectedItem == 0) ? appCount - 1 : selectedItem - 1;
}

void menuRPress(){
  selectedItem = (selectedItem + 1) % appCount;
}


void menuMPress(){
  currentApp = selectedItem;
}

void menuLoop(){
  display.drawRect(40, 6, 48, 48, COLOR);
  display.drawBitmap(48, 14, (const uint8_t*)pgm_read_ptr(&icons[selectedItem]), 32, 32, COLOR);
  display.setCursor(40, 56);
  display.print(appNames[selectedItem]);
}